jQuery(document).ready(function(l){imageWidget={uploader:function(e,i){var a=wp.media({title:LargoImageWidget.frame_title,multiple:!1,library:{type:"image"},button:{text:LargoImageWidget.button_title}});return a.on("close",function(){var t=a.state().get("selection").toJSON();imageWidget.render(e,i,t[0])}),a.open(),!1},render:function(t,e,i){l("#"+e+"preview").html(imageWidget.imgHTML(i)),l("#"+e+"fields").slideDown(),l("#"+e+"attachment_id").val(i.id),l("#"+e+"imageurl").val(i.url),l("#"+e+"aspect_ratio").val(i.width/i.height),l("#"+e+"width").val(i.width),l("#"+e+"height").val(i.height),l("#"+e+"size").val("full"),l("#"+e+"custom_size_selector").slideDown(),imageWidget.toggleSizes(t,e),imageWidget.updateInputIfEmpty(e,"title",i.title),imageWidget.updateInputIfEmpty(e,"alt",i.alt),imageWidget.updateInputIfEmpty(e,"description",i.description),imageWidget.updateInputIfEmpty(e,"description",i.caption)},updateInputIfEmpty:function(t,e,i){e=l("#"+t+e);""==e.val()&&e.val(i)},imgHTML:function(t){var e='<img src="'+t.url+'" ';return e+='width="'+t.width+'" ',e+='height="'+t.height+'" ',""!=t.alt&&(e+='alt="'+t.alt+'" '),e+="/>"},toggleSizes:function(t,e){"largo_image_widget_custom"==l("#"+e+"size").val()?l("#"+e+"custom_size_fields").slideDown():l("#"+e+"custom_size_fields").slideUp()},changeImgWidth:function(t,e){var i,a=l("#"+e+"aspect_ratio").val();a&&(i=l("#"+e+"width").val(),a=Math.round(i/a),l("#"+e+"height").val(a))},changeImgHeight:function(t,e){var i,a=l("#"+e+"aspect_ratio").val();a&&(i=l("#"+e+"height").val(),a=Math.round(i*a),l("#"+e+"width").val(a))}}});