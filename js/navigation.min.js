!function(){function t(){return this.scrollTop=h(window).scrollTop(),this.previousScroll=null,this.initialLoad=!0,this.init()}var h=jQuery;t.prototype.windowwidth=function(){return Math.max(window.innerWidth,h(window).width())},t.prototype.init=function(){return this.enableMobileDropdowns(),this.toggleTouchClass(),this.stickyNavEl=h(".sticky-nav-holder"),this.stickyNavWrapper=h(".sticky-nav-wrapper"),this.mainEl=h("#main"),this.mainNavEl=h("#main-nav"),this.openMenu=!1,768<this.windowwidth()&&this.stickyNavTransition(),this.bindEvents(),setTimeout(this.navOverflow.bind(this),0),this.responsiveNavigation(),this.touchDropdowns(),this},t.prototype.touch=function(){if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;domPrefixes=Modernizr._domPrefixes;for(var t=!1,i=domPrefixes.length,t=Modernizr.hasEvent("pointerdown");i--&&!t;)Modernizr.hasEvent(domPrefixes[i]+"pointerdown")&&(t=!0);return t},t.prototype.enableMobileDropdowns=function(){var i=this;h("body").on("touchstart.touchDropdown click.touchDropdown",function(t){"touchstart"==t.type&&h(this).off("click.touchDropdown"),i.openMenu&&(i.openMenu.parentElement.contains(t.target)&&(window.location=t.target.href),i.openMenu.parentNode.classList.remove("open"),i.openMenu=!1)})},t.prototype.toggleTouchClass=function(){$html=h("html"),this.touch()?$html.addClass("touch").removeClass("no-touch"):$html.addClass("no-touch").removeClass("touch")},t.prototype.bindEvents=function(){h(window).resize(this.navOverflow.bind(this)),h(window).resize(this.enableMobileDropdowns.bind(this)),h(window).resize(this.toggleTouchClass.bind(this)),h(window).resize(this.touchDropdowns.bind(this)),this.bindStickyNavEvents()},t.prototype.bindStickyNavEvents=function(){var o=this;h.each(Largo.sticky_nav_options,function(t,i){i&&o.stickyNavEl.addClass(t)}),h(window).on("scroll resize",this.stickyNavScrollCallback.bind(this)),this.stickyNavResizeCallback()},t.prototype.stickyNavResizeCallback=function(){this.windowwidth()<=768||Largo.sticky_nav_options.main_nav_hide_article&&(h("body").hasClass("single")||h("body").hasClass("page"))?(this.stickyNavEl.addClass("show"),this.stickyNavEl.parent().css("height",this.stickyNavEl.outerHeight())):(Largo.sticky_nav_options.sticky_nav_display,this.stickyNavEl.parent().css("height","")),this.stickyNavTransitionDone()},t.prototype.stickyNavScrollCallback=function(t){if(!(h(window).scrollTop()<0||h(window).scrollTop()+h(window).outerHeight()>=h(document).outerHeight())&&(!(768<this.windowwidth())||Largo.sticky_nav_options.sticky_nav_display)){var i,o,n=this.scrollDirection();if(h(window).scrollTop()<=this.mainEl.offset().top&&this.mainNavEl.length&&this.mainNavEl.is(":visible"))return this.stickyNavEl.removeClass("show"),void clearTimeout(this.scrollTimeout);if(this.previousScroll){if(this.previousScroll==n)return void(this.previousScroll=n)}else this.previousScroll=n;clearTimeout(this.scrollTimeout),"up"==n?(i=this.stickyNavEl.addClass.bind(this.stickyNavEl,"show"),o=250):"down"==n&&(i=this.stickyNavEl.removeClass.bind(this.stickyNavEl,"show"),o=500),this.scrollTimeout=setTimeout(i,o),this.previousScroll=n}},t.prototype.scrollDirection=function(){var t=h(window).scrollTop(),i=t>this.scrollTop?"down":"up";return this.scrollTop=t,i},t.prototype.touchDropdowns=function(){function i(t){if("none"!==h(".navbar .toggle-nav-bar").css("display"))return!1;h(this).closest(".dropdown").hasClass("open")||("touchstart"==t.type&&h(this).off("click.toggleNav"),h(this).parent(".dropdown").addClass("open"),h(this).parent(".dropdown").addClass("open"),n.openMenu=this,t.preventDefault(),t.stopPropagation())}function o(t){h(this).parent(".dropdown").removeClass("open")}var n=this;h(".nav li > .dropdown-toggle").each(function(){var t=h(this);768<n.windowwidth()&&(t.on("touchstart.toggleNav click.toggleNav",i),t.on("touchcancel.toggleNav",o),t.off("touchstart.toggleNav click.toggleNav"),t.off("touchcancel.toggleNav"))})},t.prototype.responsiveNavigation=function(){var n=this;h(".navbar .toggle-nav-bar").each(function(){var i=h(this),o=i.closest(".navbar");i.on("touchstart.toggleNav click.toggleNav",function(t){return"touchstart"==t.type&&i.off("click.toggleNav"),o.toggleClass("open"),h("html").addClass("nav-open"),o.find(".nav-shelf").css({top:n.stickyNavEl.position().top+n.stickyNavEl.outerHeight()}),o.hasClass("open")||(o.find(".nav-shelf li.open").removeClass("open"),h("html").removeClass("nav-open")),!1}),o.on("touchstart.toggleNav click.toggleNav",".nav-shelf .caret",function(t){if("none"==i.css("display"))return!1;"touchstart"==t.type&&o.off("click.toggleNav",".nav-shelf .dropdown-toggle");t=h(t.target).closest("li");return t.hasClass("open")||o.find(".nav-shelf li.open").removeClass("open"),t.toggleClass("open"),!1})})},t.prototype.navOverflow=function(){var t=h("#sticky-nav");if(!t.is(":visible")||this.windowwidth()<=768)this.revertOverflow();else{!this.windowwidth()<=768&&h("html").removeClass("nav-open");var i=t.find(".nav-shelf"),o=t.find(".toggle-nav-bar"),n=t.find(".nav-right"),s=i.outerWidth(),e=n.outerWidth(),a=t.find(".caret").first().outerWidth(),t=o.is(":visible");if(!t){this.stickyNavEl.hasClass("transitioning")||this.stickyNavTransition();var l=0;i.find("ul.nav > li").each(function(){h(this).is(":visible")&&(l+=h(this).outerWidth())});var r,o=i.find("ul.nav > li#menu-overflow.menu-item-has-children").last();!t&&s-e-a<l?(0==o.length&&(r='<li id="menu-overflow" class="menu-item-has-children dropdown"><a href="#" class="dropdown-toggle">'+Largo.sticky_nav_options.nav_overflow_label+'<b class="caret"></b></a><ul id="sticky-nav-overflow" class="dropdown-menu"></ul></li>',(o=h(r)).find("a").click(function(){return!1}),i.find("ul.nav > li.menu-item").last().after(o)),r=i.find("ul.nav > li.menu-item").last(),o.find("ul#sticky-nav-overflow").prepend(r),r.addClass("overflowed"),r.data("shelfwidth",s)):o.length&&(r=o.find("li").first()).hasClass("overflowed")&&r.data("shelfwidth")<s&&(i.find("ul.nav > li.menu-item").last().after(r),0==o.find("ul li").length&&o.remove());l=0;if(i.find("ul.nav > li").each(function(){h(this).is(":visible")&&(l+=h(this).outerWidth())}),s=i.outerWidth(),e=n.outerWidth(),!t&&s-e-a<l)return void 0!==this.navOverflowTimeout&&clearTimeout(this.navOverflowTimeout),void(this.navOverflowTimeout=setTimeout(this.navOverflow.bind(this),0))}this.stickyNavTransitionDone()}},t.prototype.stickyNavTransition=function(){this.stickyNavEl.hasClass("transitioning")||this.stickyNavEl.addClass("transitioning")},t.prototype.stickyNavTransitionDone=function(){var t=this;void 0!==this.stickyNavTransitionTimeout&&clearTimeout(this.stickyNavTransitionTimeout),this.stickyNavTransitionTimeout=setTimeout(function(){t.stickyNavEl.hasClass("transitioning")&&t.stickyNavEl.removeClass("transitioning")},500)},t.prototype.revertOverflow=function(){var t=h("#sticky-nav"),t=(shelf=t.find(".nav-shelf"),shelf.find("ul.nav > li#menu-overflow.menu-item-has-children").last());t.find("li.overflowed").each(function(t,i){shelf.find("ul.nav > li.menu-item").last().after(i)}),0==t.find("ul li").length&&t.remove()},void 0===window.Navigation&&(window.Navigation=t),h(document).ready(function(){window.Largo.navigation=new t})}();